"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.uniAppPlugin = void 0;
const uni_cli_shared_1 = require("@dcloudio/uni-cli-shared");
const uni_1 = require("./uni");
const build_1 = require("./build");
const configResolved_1 = require("./configResolved");
function uniAppPlugin() {
    return {
        name: 'vite:uni-app',
        uni: (0, uni_1.uniOptions)(),
        config(config, env) {
            return {
                css: {
                    postcss: {
                        plugins: (0, uni_cli_shared_1.initPostcssPlugin)({
                            uniApp: (0, uni_cli_shared_1.parseRpx2UnitOnce)(process.env.UNI_INPUT_DIR, process.env.UNI_PLATFORM),
                        }),
                    },
                },
                build: (0, build_1.buildOptions)(config, env),
            };
        },
        configResolved: configResolved_1.configResolved,
    };
}
exports.uniAppPlugin = uniAppPlugin;
